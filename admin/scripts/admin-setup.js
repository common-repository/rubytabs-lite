jQuery(window).ready(function(t){"use strict";window.rt03VA||(window.rt03VA={});var e=window.rt03VA;e.$pageAllTabs=t("#rt03page-alltabs"),e.$form=t(".rt03form-ajax"),e.$input=e.$form.find("input, textarea"),e.$inputStyleCustom=t("textarea[name=rt03auto-css-styleCustom]"),e.$editorTitle=t(".rt03se-editor-title"),e.$tabsList=t(".rt03tabs-list"),e.name=t("input[name=rt03name]").prop("value"),e.nameVar=t("input[name=rt03name-var]").prop("value"),e.ev=t("<div/>"),e.evClick="click.rt03",e.urlPage="admin.php?page={name}".replace(/\{name\}/,e.name),e.tabsCurID=null,e.slideCurID=0,e.slideNum=1,e.slideOrder=[0];var r="rt03actived",a="rt03deactived",n="rt03selected",i="rt03cur",o="rt03actived-delete";e.M={actived:function(t){!!t&&t.addClass(r)},deactived:function(t){!!t&&t.removeClass(r)},stringToJSON:function(e){return"string"==typeof e&&(e=e.replace(/\u0027/g,'"'),e=t.parseJSON(e)),e},arrayToString:function(t){for(var e="",r=0,a=t.length;a>r;r++)e+=t[r].toString()+",";return"["+e.substr(0,e.length-1)+"]"},stringEncode:function(t){return String(t).replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/\//g,"&#47;")},stringDecode:function(t){return t.replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&#47;/g,"/")},toInt:function(t,e){return/^-?\d+/g.test(t)?parseInt(t,10):e?0:t},methodGET:function(t){for(var e=window.location.search.substring(1),r=e.split("&"),a=0,n=r.length;n>a;a++){var i=r[a].split("=");if(i[0]==t)return/^\d+/g.test(i[1])?parseInt(i[1],10):i[1]}return!1},unset:function(t,e){for(var r=-1,a=0,n=e.length;n>a;a++)e[a]==t&&(r=a);return-1!=r?e.splice(r,1):e},sizeToString:function(t){var e,r,a={mb:1048576,kb:1024,b:1};for(var n in a)if(e=Math.floor(t/a[n]*10)/10,e>1){r=n;break}return e+r},getSlideID:function(t){return parseInt(t.closest(".rt03sl-item").attr("data-rt03id"),10)},getSlideIDNew:function(){for(var r=0;1e3>r;r++)if(-1==t.inArray(r,e.slideOrder))return r},getSlideText:function(e){var r=t("textarea[name=rt03auto-contents-{id}-title]".replace(/\{id\}/,e)),a=t("textarea[name=rt03auto-contents-{id}-content]".replace(/\{id\}/,e));return{title:r.length?r.val():"",content:a.length?a.val():""}}},e.RENDER={tabsItem:function(){var t=e.tabsCurInfo,r=t.id,a={id:r,nonce:t.nonce};return'<div class="rt03tl-item rt03col3 rt03col-l-2 rt03col-s-4 rt03col-xs-6 rt01swipe-prevent" data-rt03info=\''+JSON.stringify(a)+'\'><div class="rt03tl-front"><a class="rt03tl-name">'+t.name+'</a><div class="rt03tl-info"><span class="rt03tl-id" title="Tabs id"># '+r+'</span><span class="rt03tl-updated" title="Last updated">1m ago</span><a class="rt03tl-duplicate" title="Duplicate tabs"><i class="rt03i16-duplicate2"></i></a></div></div><div class="rt03tl-select rt03tabs-btn-select"></div></div>'},slideItem:function(t,e){var r="Title of slide";return e&&void 0!=e.title&&(r=e.title),'<div class="rt03sl-item rs20item" data-rt03id="'+t+'"><div class="rt03sl-front"><div class="rt03sl-name">'+r+'</div><div class="rt03sl-info"><span class="rt03sl-id"># '+(t+1)+'</span><a class="rt03sl-more"><i class="rt03i16-more"></i></a><a class="rt03sl-drag"><i class="rt03i16-drag"></i></a></div></div><div class="rt03sl-back"><a class="rt03sl-duplicate">Duplicate</a><a class="rt03sl-delete">Delete</a></div></div>'},slideInput:function(t,e){var r=e.title,a=e.content;return void 0===r&&(r=""),void 0===a&&(a=""),e.isNew&&(r="",a="Content of slide - write something..."),'<textarea class="rt03auto-title" name="rt03auto-contents-'+t+'-title" data-rt03id="'+t+'">'+r+'</textarea><textarea class="rt03auto-content" name="rt03auto-contents-'+t+'-content" data-rt03id="'+t+'">'+a+"</textarea>"},loader:function(){var e={"loader-puff":'<svg width="$width" height="$height" viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg" stroke="$color"><g fill="none" fill-rule="evenodd" stroke-width="$strokeWidth"><circle cx="22" cy="22" r="1"><animate attributeName="r"begin="0s" dur="1s"values="1; 20"calcMode="spline"keyTimes="0; 1"keySplines="0.165, 0.84, 0.44, 1"repeatCount="indefinite" /><animate attributeName="stroke-opacity"begin="0s" dur="1s"values="1; 0"calcMode="spline"keyTimes="0; 1"keySplines="0.3, 0.61, 0.355, 1"repeatCount="indefinite" /></circle><circle cx="22" cy="22" r="1"><animate attributeName="r"begin="-0.6s" dur="1s"values="1; 20"calcMode="spline"keyTimes="0; 1"keySplines="0.165, 0.84, 0.44, 1"repeatCount="indefinite" /><animate attributeName="stroke-opacity"begin="-0.6s" dur="1s"values="1; 0"calcMode="spline"keyTimes="0; 1"keySplines="0.3, 0.61, 0.355, 1"repeatCount="indefinite" /></circle></g></svg>'},r={width:30,height:30,strokeWidth:3,color:"#0099dd"},a="rt03svg";t("[data-"+a+"]").each(function(){var n=t(this),i=t.extend(!0,r,n.data(a)),o=e[i.name];void 0!=o&&(o=o.replace(/\$width/g,i.width).replace(/\$height/g,i.height).replace(/\$strokeWidth/g,i.strokeWidth).replace(/\$color/g,i.color),n.append(t(o)),n.removeAttr("data-"+a))})},skinColor:function(t){var e={rt01flat:"$idTabs > .rt01tabs .rt01pagitem.rt01cur { background-color: $color; }$idTabs > .rt01tabs.rt01pag-hor.rt01pag-begin { border-bottom-color: $color; }$idTabs > .rt01tabs.rt01pag-hor.rt01pag-end { border-top-color: $color; }$idTabs > .rt01tabs.rt01pag-ver .rt01pagitem.rt01cur { border-bottom-color: $color; }$idTabs.rt01pag-ver.rt01pag-begin > .rt01viewport { border-left-color: $color; }$idTabs.rt01pag-ver.rt01pag-end > .rt01viewport { border-right-color: $color; }$idTabs .rt01tabs.rt01pag-ver.rt01outside.rt01pag-begin { border-right-color: $color; }$idTabs .rt01tabs.rt01pag-ver.rt01outside.rt01pag-end { border-left-color: $color; }",rt01flatbox:"$idTabs > .rt01tabs .rt01pagitem.rt01cur { background-color: $color; }$idTabs > .rt01tabs.rt01pag-hor.rt01pag-begin { border-bottom-color: $color; }$idTabs > .rt01tabs.rt01pag-hor.rt01pag-end { border-top-color: $color; }$idTabs > .rt01tabs.rt01pag-ver .rt01pagitem.rt01cur { border-bottom-color: $color; }$idTabs.rt01pag-ver.rt01pag-begin > .rt01viewport { border-left-color: $color; }$idTabs.rt01pag-ver.rt01pag-end > .rt01viewport { border-right-color: $color; }",rt01round:"$idTabs > .rt01tabs .rt01pagitem.rt01cur { background-color: $color; }",rt01outline:"$idTabs > .rt01tabs .rt01pagitem.rt01cur:before,$idTabs > .rt01tabs .rt01pagitem.rt01cur:after { background-color: $color; }$idTabs > .rt01tabs .rt01pagitem.rt01cur { border-color: $color !important; }",rt01underline:"$idTabs > .rt01tabs.rt01pag-hor.rt01pag-begin .rt01pagitem.rt01cur { border-bottom-color: $color; }$idTabs > .rt01tabs.rt01pag-hor.rt01pag-end .rt01pagitem.rt01cur { border-top-color: $color; }$idTabs > .rt01tabs.rt01pag-ver .rt01pagitem.rt01cur { border-bottom-color: $color; }"};return e[t]},tabsPreview:function(){var r=e.optsAutoCur,a=r.cssClass.join(" "),n=r.contents,i=r.info.slideNum,o=r.css,s=o.skin,l="rt01id-"+r.info.id,d=o.domID?'id="'+o.domID+'" ':"",c="",u="";if(""!=s){var p=t("input[name=rt03auto-css-colorCur]").data("defaultColor");if(o.colorCur!=p){var v=e.RENDER.skinColor(s);v=v.replace(/\$color/g,o.colorCur),u+=v.replace(/\$idTabs/g,"."+l+"."+s)}}if(u+=o.styleCustom,""!=u&&(c+='<style type="text/css">'+u+"</style>"),i){for(var f="",g=0;i>g;g++){var m=r.info.slideOrder[g];f+='<div><div class="rt01pagitem">'+n[m].title+"</div>"+n[m].content+"</div>"}c+="<div "+d+'class="rt01 rt03tabs-preview '+l+" "+a+'">'+f+"</div>"}return e.M.stringDecode(c)}},e.OPTION={getFromInput:function(){var r=e.$form.find("input, textarea, select"),a=/^rt03auto\-/g,n="rt03auto-".length,i={info:{},css:{},cssClass:[],jsData:{}};return r.each(function(){var e=t(this),r=e.prop("name"),o=e.val();if(r.match(a)){var s,l={},d=r.substr(n).split("-"),c=d.length;t.isNumeric(o)?o=parseFloat(o):/(^\[.*\]$)|(^\{.*\}$)/.test(o)&&(o=JSON.parse(o)),c>0&&(s=l[d[0]],l[d[0]]=1==c?o:void 0==s?{}:s),c>1&&(s=l[d[0]][d[1]],l[d[0]][d[1]]=2==c?o:void 0==s?{}:s),c>2&&(s=l[d[0]][d[1]][d[2]],l[d[0]][d[1]][d[2]]=3==c?o:void 0==s?{}:s),c>3&&(s=l[d[0]][d[1]][d[2]][d[3]],l[d[0]][d[1]][d[2]][d[3]]=4==c?o:void 0==s?{}:s),i=t.extend(!0,i,l)}}),i},removeKeyMatch:function(r,a){for(var n in r)t.isPlainObject(r[n])?e.OPTION.removeKeyMatch(r[n],a[n]):r[n]===a[n]&&delete r[n],t.isPlainObject(r[n])&&t.isEmptyObject(r[n])&&delete r[n]},setupAtInit:function(){var e=".rt03js-begin",r=".rt03js-begin-add",a="valueLast";t(e).each(function(){var e=t(this),n=e.find("input"),i=e.find(r),o=e.data(a);if(void 0!=o)if(/(string|number)/.test(typeof o))n.length&&n.prop("value",o),i.length&&i.text(o);else if(t.isPlainObject(o)&&o.list){o=o.list;for(var s=0,l=o.length;l>s;s++)n.eq(s).length&&n.eq(s).prop("value",o[s]);i.length&&i.text(o.join(" - "))}})},valueInputAtInit:function(){e.valueInputInit={};var r=e.$form.find("input, textarea, select");r.each(function(){var r=t(this),a=r.prop("name"),n=r.val();e.valueInputInit[a]=n}),e.optsAutoInit=e.OPTION.getFromInput()},getCur:function(){e.UPDATE.textEditorToInput(),e.UPDATE.editorCssSave();var t=e.OPTION.getFromInput();e.OPTION.removeKeyMatch(t.jsData,e.optsAutoInit.jsData);for(var r=["skin","size","domClass","classTimer","classInit"],a=t.css,n=0,i=r.length;i>n;n++){var o=a[r[n]];void 0!=o&&""!=o&&t.cssClass.push(o)}return e.optsAutoCur=t}},e.UPDATE={inputFromData:function(r){var a=e.$form.find("input, textarea, select");a.each(function(){var a=t(this),n=a.prop("name"),i=n.split("-");if("rt03auto"==i[0]){i.shift();for(var o=null,s=null,l=t.extend(!0,{},r),d=0,c=i.length;c>d&&(o=l[i[d]],void 0!=o);d++)t.isArray(o)?/\d+/g.test(i[d+1])?l=t.extend(!0,[],o):s=e.M.arrayToString(o):t.isPlainObject(o)?l=t.extend(!0,{},o):s=o;null==s&&(s=e.valueInputInit[n]),a.prop("value",s).trigger("change")}}),e.UPDATE.editorCssFromInput()},inputToInit:function(){var r=e.$form.find("input, textarea, select");r.each(function(){var r=t(this),a=r.prop("name");r.prop("value",e.valueInputInit[a]).trigger("change")}),e.UPDATE.editorCssFromInput()},textEditorToInput:function(){var r="rt03se-editor-content",a=t("textarea[name=rt03auto-contents-"+e.slideCurID+"-title]"),n=t("textarea[name=rt03auto-contents-"+e.slideCurID+"-content]");if(a.length&&n.length&&window.tinymce){var i=e.M.stringEncode(e.$editorTitle.val());a.val(i);var o=tinymce.get(r),s=t("#"+r).val();o&&!o.hidden&&(s=o.getContent({format:"raw"})),n.val(e.M.stringEncode(s))}},textInputToEditor:function(){var r="rt03se-editor-content",a=t("textarea[name=rt03auto-contents-"+e.slideCurID+"-title]"),n=t("textarea[name=rt03auto-contents-"+e.slideCurID+"-content]");if(a.length&&n.length&&window.tinymce){var i=e.M.stringDecode(a.val());e.$editorTitle.val(i);var o=tinymce.get(r),s=e.M.stringDecode(n.val());t("#"+r).val(s),o&&!o.hidden&&o.setContent(s,{format:"raw"})}},slideCur:function(r,a){a||e.UPDATE.textEditorToInput(),e.slideCurID=r;var n=t(".rt03sl-item"),o=t(".rt03sl-item[data-rt03id={id}]".replace(/\{id\}/,r));n.length&&o.length&&(n.not(o).removeClass(i),o.addClass(i)),e.UPDATE.textInputToEditor(),e.EVENTS.changeLiveOnSlideName()},slideNum:function(r){r?e.slideNum++:e.slideNum--;var a=t("input[name=rt03auto-info-slideNum]");a.length&&a.prop("value",e.slideNum)},slideOrder:function(){var r=t(".rt03sl-item"),a=[];r.each(function(){var r=e.M.getSlideID(t(this));a.push(r)}),e.slideOrder=a,t("input[name=rt03auto-info-slideOrder").prop("value",e.M.arrayToString(e.slideOrder))},colorPicker:function(){var e=t(".rt03picker-item");e.each(function(){var e=t(this);e.wpColorPicker({palettes:!1})})},editorCssSave:function(){if(e.editorCssCustom){var t=e.editorCssCustom.getValue();e.$inputStyleCustom.val(e.M.stringEncode(t))}},editorCssFromInput:function(){if(e.editorCssCustom){var t=e.$inputStyleCustom.val();e.editorCssCustom.setValue(e.M.stringDecode(t))}}},e.PAGE={convertToCreate:function(){e.UPDATE.inputToInit();var r=t(".rt03tabs-setting"),a=t(".rt03tabs-options");if(!!r&&r.rubytabs("goto",0),!!a&&a.rubytabs("goto",0),e.tabsCurID=null,e.slideNum=1,e.slideOrder=[0],e.SLIDE.resetItemAndInput(),e.PAGE.toggle("create"),e.TABSLIST.toggleCur(t()),e.UPDATE.slideCur(0,!0),e.EVENTS.onSlideElements(),window.history&&window.history.replaceState){var n=window.location.search;/&id=\d+/.test(n)&&window.history.replaceState(null,null,e.urlPage)}},convertToCreateIfDelete:function(){null!=e.tabsCurID&&e.$aTabsItem.each(function(){var r=t(this).data("rt03info").id;return r==e.tabsCurID?void e.PAGE.convertToCreate():void 0})},convertToEdit:function(){var r=e.tabsCurInfo,a=r.id;if(t("input[name=rt03auto-info-id]").prop("value",a),t("input[name=rt03auto-info-slug]").prop("value",r.slug),t("input[name=rt03auto-info-name]").prop("value",r.name),t(".rt03tabs-shortcode").text('[{name} id="{id}"]'.replace(/\{name\}/,e.nameVar).replace(/\{id\}/,a)),e.tabsCurID=a,e.PAGE.toggle("edit"),window.history&&window.history.replaceState){var n=e.urlPage+"&id="+a;window.history.replaceState(null,null,n)}},"goto":function(e){var r=t("#rt03page-editor");if(r.length){var a;"alltabs"==e?a=0:"tabs"==e?a=1:"slide"==e&&(a=2),void 0!=a&&r.rubytabs("goto",a)}},toggle:function(e){var r,a,n,i=t(".rt03page"),o=t("input[name=rt03page]"),s="rt03page-",l="create",d="edit";"create"==e?(r=s+l,a=s+d,n=l):"edit"==e&&(r=s+d,a=s+l,n=d),!!i&&i.addClass(r).removeClass(a),!!o&&o.prop("value",n)},freeze:function(e){var r=t("#rt03editor-tabs"),n=t("#rt03page-slide");r.add(n)[e?"addClass":"removeClass"](a)}},e.TABSLIST={refreshItem:function(){var r=e.$tabsList;if(r.length){for(var a=r.rubytabs(),n=parseInt(t("input[name=rt03count-tabsitem-each-slide]").prop("value"),10),i=r.find(".rt03tl-item"),o=r.find(".rt01slide"),s=[],l=0,d=0,c=0,u=i.length;u>c;c++){var p=i.eq(c);void 0==s[d]&&(s[d]=t()),s[d]=s[d].add(p),l++,l>=n&&(l=0,d++)}for(var v=o.length,d=s.length,f=d>v?v:d,g=0;f>g;g++){var m=o.eq(g).find(".rt03row");m.length&&m.append(s[g])}if(d>v)for(;d>g;g++){var b=t("<div/>",{"class":"rt01slide"}),h=t("<div/>",{"class":"rt01pagitem",text:g+1}),m=t("<div/>",{"class":"rt03row"});b.append(h).append(m.append(s[g])),a.addSlide(b)}else if(v>d)for(;v>g;g++)a.removeSlide(g);1==v&&d>1&&a.update({isSwipe:!0}),this.classNumSlide()}},classNumSlide:function(){var t=e.$tabsList,r=t.rubytabs();t[1==r.num?"addClass":"removeClass"]("rt03one-slide")},getItem:function(){var r=t(".rt03tl-item"),a=t();return r.each(function(){var r=t(this),n=r.data("rt03info");return n.id==e.tabsCurID?void(a=r):void 0}),a},toggleCur:function(e){var r=t(".rt03tl-item");r.not(e).removeClass(i),e.addClass(i)},insertNewItem:function(){var r=t(e.RENDER.tabsItem());e.$tabsList.find(".rt03row").last().append(r),e.TABSLIST.toggleCur(r),e.TABSLIST.refreshItem(),e.EVENTS.tapOnTabsName()},updateTabsItem:function(){var r=e.TABSLIST.getItem();if(r.length){var a=t("input[name=rt03auto-info-name]").val(),n=r.find(".rt03tl-name"),i=r.find(".rt03tl-updated");n.html(a),i.text("1m ago")}}},e.SLIDE={deleteItemAndInput:function(){var e=t(".rt03sl-item");e.length&&e.remove();var r=t(".rt03slide-content textarea");r.length&&r.remove()},resetItemAndInput:function(){e.SLIDE.deleteItemAndInput();var r=t(".rt03sl-new"),a=t(".rt03slide-content");r.length&&r.before(e.RENDER.slideItem(0)),a.length&&a.append(e.RENDER.slideInput(0,{isNew:!0}))},updateItemAndInput:function(r){e.SLIDE.deleteItemAndInput();for(var a=r.info,n=a.slideNum,i=a.slideOrder,o=t(".rt03sl-new"),s=t(".rt03slide-content"),l="",d="",c=0;n>c;c++){var u=i[c],p=t.extend(!0,{isNew:!1},r.contents[u]);l+=e.RENDER.slideItem(u,p),d+=e.RENDER.slideInput(u,p)}o.length&&o.before(l),s.length&&s.append(d)},"new":function(r){var a=e.M.getSlideIDNew(),n=t(".rt03sl-new"),i=t(".rt03slide-content");n.length&&n.before(e.RENDER.slideItem(a)),i.length&&i.append(e.RENDER.slideInput(a,{isNew:!1})),e.UPDATE.slideCur(a),e.UPDATE.slideNum(!0),e.UPDATE.slideOrder(),e.EVENTS.onSlideElements()},duplicate:function(r){var a=e.M.getSlideID(r),n=e.M.getSlideIDNew(),i=t(".rt03sl-new"),o=t(".rt03slide-content");e.UPDATE.textEditorToInput();var s=e.M.getSlideText(a);s.title+=" - copy",s.isNew=!1,i.length&&i.before(e.RENDER.slideItem(n,s)),o.length&&o.append(e.RENDER.slideInput(n,s)),e.UPDATE.slideCur(n,!1),e.UPDATE.slideNum(!0),e.UPDATE.slideOrder(),e.EVENTS.onSlideElements()},"delete":function(r){var a=r.closest(".rt03sl-item"),n=e.M.getSlideID(a);a.remove();var i=t("textarea[name=rt03auto-contents-{id}-title".replace(/\{id\}/,n)),o=t("textarea[name=rt03auto-contents-{id}-content".replace(/\{id\}/,n));i.length&&i.remove(),o.length&&o.remove(),e.UPDATE.slideNum(!1),e.UPDATE.slideOrder(),e.slideCurID==n&&e.UPDATE.slideCur(e.slideOrder[0])}},e.BOX={confirmDelResetWhenClose:function(){!!e.$aTabsItem&&e.$aTabsItem.removeClass(n),e.$pageAllTabs.removeClass(o);var r=t(".rt03control-delete");e.M.deactived(r),t(".rt03control-delete").rubybox("close"),t(".rt03btn-tabs-delete").rubybox("close")}},e.AJAX={getTabsData:function(r){var a=r.data("rt03info");a=e.M.stringToJSON(a),a.action="rt03ajax_tabs_getdata",t.ajax({type:"POST",url:"admin-ajax.php",data:a,success:function(r){if(r=e.AJAX.checkDataReturn(r,"rt03get-success"),t.isPlainObject(r)){var a=e.tabsCurInfo=r.info;e.UPDATE.inputFromData(r),e.SLIDE.updateItemAndInput(r),e.slideNum=a.slideNum,e.slideOrder=a.slideOrder,e.UPDATE.slideCur(e.slideOrder[0],!0),e.EVENTS.onSlideElements(),e.PAGE.convertToEdit()}e.PAGE.freeze(!1)},error:function(){e.PAGE.freeze(!1)}})},updateTabsData:function(r){e.M.actived(r),e.OPTION.getCur();var a={action:"rt03ajax_tabs_update",page:t("input[name=rt03page]").val(),optsAuto:e.optsAutoCur};t.ajax({type:"POST",url:"admin-ajax.php",data:a,success:function(a){var n=e.AJAX.checkDataReturn(a,"rt03update-success"),i=e.AJAX.checkDataReturn(a,"rt03create-success");n===!0?e.TABSLIST.updateTabsItem():t.isPlainObject(i)&&(e.tabsCurInfo=i,e.PAGE.convertToEdit(),e.TABSLIST.insertNewItem()),e.M.deactived(r)},error:function(){e.M.deactived(r)}})},deleteTabsData:function(){var r={action:"rt03ajax_tabs_delete",info:[]};e.$aTabsItem.each(function(){r.info.push(t(this).data("rt03info"))});var a=function(){e.M.deactived(t(".rt03btn-ajax-tabs")),e.BOX.confirmDelResetWhenClose(),e.PAGE["goto"]("alltabs")};t.ajax({type:"POST",url:"admin-ajax.php",data:r,success:function(){e.$aTabsItem.remove(),e.TABSLIST.refreshItem(),a()},error:function(){a()}})},checkDataReturn:function(t,e){if(-1==t.indexOf(e))return!1;if(t==e)return!0;var r,a=!0;try{r=JSON.parse(t)}catch(n){a=!1}if(a)return r;var i=t.indexOf('{"');if(-1==i)return!0;var o=t.substr(i,t.length-1);try{return JSON.parse(o)}catch(n){return!1}}},e.EVENTS={tapOnTabsNew:function(){var r=t(".rt03tabs-new");r.length&&r.on(e.evClick,function(){return e.PAGE.convertToCreate(),e.PAGE["goto"]("slide"),!1})},tapOnTabsName:function(){var r=t(".rt03tl-name");r.length&&r.off(e.evClick).on(e.evClick,function(r){var a=t(this).closest(".rt03tl-item"),n=a.data("rt03info").id;return n!=e.tabsCurID&&(e.TABSLIST.toggleCur(a),e.AJAX.getTabsData(a),e.PAGE.freeze(!0)),e.PAGE["goto"]("slide"),!1})},tapOnTabsUpdate:function(){var r=t(".rt03ajax-tabs-new, .rt03ajax-tabs-update");r.length&&r.on(e.evClick,function(){return e.AJAX.updateTabsData(t(this)),!1})},tapOnTabsDelete:function(){var r=t(".rt03btn-tabs-delete");if(r.length){r.rubybox();r.on(e.evClick,function(t){var r=e.TABSLIST.getItem();return e.$aTabsItem=r,!1})}},tapOnTabsSelect:function(r){e.$aTabsItem=t(),r.off(e.evClick).on(e.evClick,function(){var r=t(this),a=r.closest(".rt03tl-item");a.hasClass(n)?(a.removeClass(n),e.$aTabsItem=e.$aTabsItem.not(a)):(a.addClass(n),e.$aTabsItem=e.$aTabsItem.add(a))})},tapOnControlDelete:function(){var a,n=t(".rt03control-delete");if(n.length){var i=n.rubybox();n.on(e.evClick,function(t){return n.hasClass(r)?(a.length&&a.off(e.evClick),e.$aTabsItem.length?i.open():e.BOX.confirmDelResetWhenClose()):(a=e.$pageAllTabs.find(".rt03tl-select"),a.length&&(n.addClass(r),e.$pageAllTabs.addClass(o),e.EVENTS.tapOnTabsSelect(a))),!1})}},tapOnDeleteSelectAll:function(){var a=t(".rt03delete-selectall");a.length&&a.on(e.evClick,function(){return a.hasClass(r)?(a.removeClass(r),e.$aTabsItem.length&&e.$aTabsItem.removeClass(n),e.$aTabsItem=t()):(a.addClass(r),e.$aTabsItem=t(".rt03tl-item"),e.$aTabsItem.length&&e.$aTabsItem.addClass(n)),!1})},tapOnBoxDeleteYes:function(){var r=t("#rt03warn-delete .rt03confirm-delete");r.length&&r.on(e.evClick,function(){var t=r.closest(".rt03btn-ajax-tabs");return e.M.actived(t),e.PAGE.convertToCreateIfDelete(),e.AJAX.deleteTabsData(),!1})},tapOnBoxDeleteClose:function(){var r=t("#rt03warn-delete .rt03confirm-cancel");r.length&&r.on(e.evClick,function(){e.BOX.confirmDelResetWhenClose()})},tapOnSlideNew:function(){var r=t(".rt03sl-new");r.length&&r.on(e.evClick,function(){return e.SLIDE["new"](),!1})},tapOnSlideName:function(){var r=t(".rt03sl-name");r.length&&r.off(e.evClick).on(e.evClick,function(r){var a=t(this),n=e.M.getSlideID(a);return void 0!=n&&e.UPDATE.slideCur(n),!1})},tapOnSlideMore:function(){var a=t(".rt03sl-more");a.length&&a.off(e.evClick).on(e.evClick,function(){var e=t(this),a=e.closest(".rt03sl-item"),n="rt03actived-more";return e.hasClass(r)?(e.removeClass(r),a.removeClass(n)):(e.addClass(r),a.addClass(n)),!1})},tapOnSlideDuplicate:function(){var r=t(".rt03sl-duplicate");r.length&&r.off(e.evClick).on(e.evClick,function(){return e.SLIDE.duplicate(t(this)),!1})},tapOnSlideDelete:function(){var r=t(".rt03sl-delete");r.length&&r.off(e.evClick).on(e.evClick,function(){return e.SLIDE["delete"](t(this)),!1})},onSlideElements:function(){e.EVENTS.tapOnSlideName(),e.EVENTS.tapOnSlideMore(),e.EVENTS.tapOnSlideDuplicate(),e.EVENTS.tapOnSlideDelete(),!!e.rubySortOfSlide&&e.rubySortOfSlide.update()},changeLiveOnSlideName:function(){var r="change keydown paste cut",a=e.$editorTitle,n=t(".rt03sl-item[data-rt03id={id}] .rt03sl-name".replace(/\{id\}/,e.slideCurID));if(clearTimeout(e.tiChange),!n.length)return void a.off(r);var i=function(){n.html(a.prop("value"))};a.off(r).on(r,function(t){clearTimeout(e.tiChange),e.tiChange=setTimeout(i,100)})},onDragEnd:function(){e.rubySortOfSlide.ev.on("dragEnd",function(){e.UPDATE.slideOrder()})},onResizeEnd:function(){var e=t("#rt03page-editor").rubytabs();if(e){var r,a=function(){var e=t(".rr01");e.length&&e.rubyranger("refresh")};e.ev.on("resizeEnd",function(){clearTimeout(r),r=setTimeout(a,100)})}},tabsPreview:function(){var r=t(".rt03btn-tabs-preview");r.each(function(){var r=t(this),a=r.rubybox({width:1300,height:2e3,html:{close:'<div class="{ns}btn-close rt03box-close"><i class="rt03icon"></i></div>'}});r.on("mousedown.rt03",function(){e.EVENTS.boxPreview(a)})})},boxPreview:function(r){var a=t(".rt03preview");r.ev.one("beforeOpen",function(){var n=e.OPTION.getCur(),i=n.contents;if(1==n.info.slideNum&&""==i[0].title&&""==i[0].content)r.$tabsPreview=r.rubytabs=null;else{var o=e.RENDER.tabsPreview();r.$tabsPreview=t(o),a.append(r.$tabsPreview)}}),r.ev.one("openFxAfter",function(){r.$tabsPreview&&(r.rubytabs=r.$tabsPreview.rubytabs(e.optsAutoCur.jsData))}),r.ev.one("afterClose",function(){r.rubytabs&&(r.rubytabs.destroy(!0),a.empty())})},tapOnDonate:function(){var r=t(".rt03btn-donate"),a=(r.rubybox({width:800,height:530,html:{close:'<div class="{ns}btn-close rt03box-close"><i class="rt03icon"></i></div>'}}),t(".rt03btn-paypal")),n=t(".rt03paypal-submit");a.length&&n.length&&a.on(e.evClick,function(){return n[0].click(),!1})}},e.OTHER={codemirror:function(){var r=".rt03auto-styleCustom",a="input[name=rt03url-js]",n="/codemirror.min.js",i=t(a),o=t(r);if(i.length&&o.length){var s=i.prop("value"),l=s+n;i.remove(),t.ajax({url:l,dataType:"script",success:function(){var t=CodeMirror.fromTextArea(o[0],{minHeight:300,height:500,lineNumbers:!0,indentUnit:4,viewportMargin:1/0,extraKeys:{"Ctrl-Space":"autocomplete"}});e.editorCssCustom=t,e.UPDATE.editorCssFromInput()}})}},rubyranger:function(){var e=t(".rr01");!!e.length&&e.rubyranger()},uiFallback:function(){var e=t("input[name=rt03ui-fallback").val(),r="rt03ui-fallback";"true"==e&&t("body").addClass(r)}},e.INIT=function(){e.OPTION.setupAtInit(),e.OPTION.valueInputAtInit(),e.UPDATE.slideCur(0,!0),e.RENDER.loader(),e.EVENTS.tapOnTabsNew(),e.EVENTS.tapOnTabsName(),e.EVENTS.tapOnTabsUpdate(),e.EVENTS.tapOnTabsDelete(),e.EVENTS.tabsPreview(),e.EVENTS.tapOnControlDelete(),e.EVENTS.tapOnDeleteSelectAll(),e.EVENTS.tapOnBoxDeleteYes(),e.EVENTS.tapOnBoxDeleteClose(),e.EVENTS.tapOnSlideNew(),e.EVENTS.onSlideElements(),e.EVENTS.changeLiveOnSlideName(),e.EVENTS.tapOnDonate(),e.rubySortOfSlide=t(".rt03slide-list").rubysortable({classZoneDrag:"rt03sl-drag"}),e.EVENTS.onDragEnd(),e.EVENTS.onResizeEnd(),e.TABSLIST.classNumSlide(),e.UPDATE.colorPicker(),e.OTHER.codemirror(),e.OTHER.rubyranger(),e.OTHER.uiFallback()},e.INIT(),function(){var i=t("#rt03export-field"),o=function(r){t.ajax({type:"POST",url:"admin-ajax.php",data:{action:"rt03ajax_import_update",rt03database:r},success:function(t){e.ev.trigger("ajax-import-success",t)},error:function(){e.ev.trigger("ajax-import-error")}})},s=t("#rt03import-update");if(s.length){var l=t("#rt03import-field");s.on("click",function(){var t=l.val();return o(t),!1})}var d=t("#rt03export-get");d.length&&d.on("click",function(){return t.ajax({type:"POST",url:"admin-ajax.php",data:{action:"rt03ajax_export_get"},success:function(t){i.val(t)}}),!1});var c=t("#rt03export-select");c.length&&c.on("click",function(){return i.select(),!1});var u=t(".rt03-form-clear");u.length&&u.on("click",function(){return $field=t(t(this).data("textarea")),$field.val(""),!1}),function(){var n=".rt03import",i=".rt03import-input-file",s=".rt03import-select",l=".rt03import-upload",d=".rt03import-output",c="click.rt03import",u="rt03selected-file",p="rt03actived-drop",v=t(n),f=t(l),g=t(d),m=null;if(v.length){var b=function(t){if(t.length){var r=t[0];if(/^image.*/.test(r.type))return void e.ev.trigger("ajax-import-success","import-error");e.ev.trigger("file-select-success",r);var a=new FileReader;a.onload=function(t){return function(t){m=t.target.result,e.ev.trigger("file-read-success",r)}}(r),a.readAsBinaryString(r)}else m=null,e.ev.trigger("file-select-error")},h=t(s),T=t(i);h.on(c,function(){return T.click(),!1}),T.on("change",function(){b(this.files)}),e.ev.on("file-read-success",function(t,r){v.addClass(u),g.text(r.name+" - "+e.M.sizeToString(r.size)),f.removeClass(a)}),e.ev.on("file-select-error",function(t,e){v.removeClass(u+" "+p),f.addClass(a).removeClass(r),g.html(e?e:"")}),f.on(c,function(){return f.hasClass(a)||null==m||(f.addClass(r),o(m)),!1}),v.on("dragover",function(t){return!1}),v.on("dragenter",function(t){return!v.hasClass(p)&&v.addClass(p),!1}),t(document).on("dragenter",function(){v.hasClass(p)&&v.removeClass(p)}),v.on("drop",function(t){var e=t.originalEvent.dataTransfer.files;return b(e),!1}),e.ev.on("ajax-import-success",function(t,a){if("import-success"==a&&window.location.reload){var n='<span style="color: #0099dd;">Import data success!</span>';g.html(n),f.removeClass(r),setTimeout(function(){window.location.reload()},500)}else if("import-error"==a){var n='<span style="color: #d00;">Content data not valid. Import fail!</span>';e.ev.trigger("file-select-error",n)}})}}(),function(){var i=".rt03tl-select",o=".rt03page-manage",s=".rt03export-select-all",l=".rt03export-download-btn",d=".rt03export-info",c=".rt03export-submit",u=".rt03control-imex",p=t(o),v=t(s),f=t(l),g=t(d),m=t(c),b=t(),h=t(),T=t(),C="rt03actived-imex",E="click.rt03export",I=t(u);p.length&&I.length&&I.on(E,function(){return I.hasClass(r)?(I.removeClass(r),p.removeClass(C),v.length&&v.removeClass(r),e.ev.trigger("import-export-deactived")):(I.addClass(r),p.addClass(C),e.ev.trigger("import-export-actived")),!1}),e.ev.on("import-export-actived",function(){b=p.find(i),b.length&&b.on(E,function(){var r=t(this),a=r.closest(".rt03col");return a.hasClass(n)?(a.removeClass(n),h=h.not(r),T=T.not(a),e.ev.trigger("export-item-toggle")):(a.addClass(n),h=h.add(r),T=T.add(a),e.ev.trigger("export-item-toggle")),!1})}),e.ev.on("import-export-deactived",function(){b.length&&b.off(E),e.ev.trigger("export-select-reset")}),e.ev.on("export-select-reset",function(){v.length&&v.removeClass(r),f.length&&f.addClass(a),T.length&&T.removeClass(n),h=T=t()}),v.length&&v.on(E,function(){return v.hasClass(r)?(v.removeClass(r),e.ev.trigger("export-select-reset")):(h=b,T=h.closest(".rt03col"),v.addClass(r),T.length&&T.addClass(n)),e.ev.trigger("export-item-toggle"),!1}),f.length&&(e.ev.on("export-item-toggle",function(){h.length?f.hasClass(a)&&f.removeClass(a):!f.hasClass(a)&&f.addClass(a)}),f.on(E,function(){if(!f.hasClass(a)){var r,n={};h.each(function(){r=t(this).data("rt03info"),n[r.id]=r}),n=JSON.stringify(n),n=n.replace(/\"/g,"&#q;"),g.length&&g.prop("value",n),e.ev.trigger("export-select-reset"),m.length&&m.click()}return!1}))}()}(),function(){!function(){var r=t(".rt03tabs-options");if(r.length){var a=r.rubytabs();!!a&&a.ev.on("after",function(){setTimeout(function(){e.ev.trigger("ranger-update")},200)})}}()}()});